{
    "$schema": "http://json-schema.org/draft-04/schema#",
    "$id": "https://github.com/IBM/the-mesh-for-data/pkg/taxonomy/module_schema.json",
    "title": "Module Taxonomy",
    "description": "Portion of the taxonomy contributed to by the mesh for data modules.",
    "definitions": {
        "credential_management": {
            "type": "string",
            "description": "The method used by the M4D manager to handle data and user credentials.",
            "enum": ["secret-provider", "automatic"]
        },
        "module_type": {
            "type": "string",
            "description": "Type of modules supported by the M4D manager.",
            "enum": ["copy", "read", "write"]
        },
        "module_dependency": {
            "type": "object",
            "description": "Process on which a module is dependent.",
            "properties": {
                "dependency_type": {
                    "type": "string",
                    "description": "The type of processes on which a module can have dependencies.",
                    "enum": ["module", "connector", "feature"]
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "protocol": {
            "type": "string",
            "description": "Protocol via which data is accessed.",
            "enum": ["s3", "kafka", "jdbc-db2", "m4d-arrow-flight"]
        },
        "transformation": {
            "type": "object",
            "description": "Transformation that may be applied to data.",
            "properties": {
                "name" : {
                    "type": "string",
                    "description": "The name of the transform",
                    "uniqueItems": true,
                    "enum": ["mask", "redact", "encrypt"]                   
                },
                "params": {
                    "type": "array",
                    "description": "List of optional parameters provided to the transform function.",
                    "items": {
                        "type":"string"
                    }
                },
                "level": {
                    "type": "object",
                    "properties": {
                        "value": {
                            "type":"integer",
                            "description":"0=unknown, 1=dataset, 2=column, 3=row, 4=cell",
                            "minimum": 0,
                            "maximum": 4
                        },
                        "name": {
                            "type":"string",
                            "enum":["UNKNOWN", "DATASET", "COLUMN", "ROW", "CELL"]
                        }
                    }
                }
            },
            "required": ["name"]
        }
    }
}